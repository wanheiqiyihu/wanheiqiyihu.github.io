<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wanheiqiyihu.top","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="六、学习py：文件操作的相关操作1.文件操作在正式学习文件操作之前，大火先来看一下数据类型和编码的一些知识。 1.字符串类型（str）,在程序中用于表示文字信息，本质上是unicode编码中的二进制。 2.字节类型(bytes)可表示文字信息，本质上是utf-8\gbk编码的二进制（对unicode进行了压缩方便文件存储和网络传输。） 图片也可以表示。 1.1读文件1.1.1读文本文件123456">
<meta property="og:type" content="article">
<meta property="og:title" content="六、学习py：文件操作的相关操作">
<meta property="og:url" content="https://wanheiqiyihu.top/2021/12/31/%E5%85%AD%E3%80%81%E5%AD%A6%E4%B9%A0py%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/index.html">
<meta property="og:site_name" content="十三の博客">
<meta property="og:description" content="六、学习py：文件操作的相关操作1.文件操作在正式学习文件操作之前，大火先来看一下数据类型和编码的一些知识。 1.字符串类型（str）,在程序中用于表示文字信息，本质上是unicode编码中的二进制。 2.字节类型(bytes)可表示文字信息，本质上是utf-8\gbk编码的二进制（对unicode进行了压缩方便文件存储和网络传输。） 图片也可以表示。 1.1读文件1.1.1读文本文件123456">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wanheiqiyihu.top/2021/12/31/%E5%85%AD%E3%80%81%E5%AD%A6%E4%B9%A0py%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/Users/wanheiqiyihu/AppData/Roaming/Typora/typora-user-images/image-20211230172323356.png">
<meta property="article:published_time" content="2021-12-31T10:28:04.000Z">
<meta property="article:modified_time" content="2021-12-31T10:28:44.000Z">
<meta property="article:author" content="十三">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wanheiqiyihu.top/2021/12/31/%E5%85%AD%E3%80%81%E5%AD%A6%E4%B9%A0py%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/Users/wanheiqiyihu/AppData/Roaming/Typora/typora-user-images/image-20211230172323356.png">

<link rel="canonical" href="https://wanheiqiyihu.top/2021/12/31/%E5%85%AD%E3%80%81%E5%AD%A6%E4%B9%A0py%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-cn'
  };
</script>

  <title>六、学习py：文件操作的相关操作 | 十三の博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">十三の博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-ctf做题笔记">

    <a href="/categories/Experience" rel="section"><i class="download fa-fw"></i>CTF做题笔记</a>

  </li>
        <li class="menu-item menu-item-python">

    <a href="/categories/python" rel="section"><i class="download fa-fw"></i>python</a>

  </li>
        <li class="menu-item menu-item-java">

    <a href="/categories/java" rel="section"><i class="download fa-fw"></i>java</a>

  </li>
        <li class="menu-item menu-item-读书笔记">

    <a href="/categories/readbook" rel="section"><i class="download fa-fw"></i>读书笔记</a>

  </li>
        <li class="menu-item menu-item-渗透测试">

    <a href="/categories/penetration" rel="section"><i class="download fa-fw"></i>渗透测试</a>

  </li>
        <li class="menu-item menu-item-基础">

    <a href="/categories/basic" rel="section"><i class="download fa-fw"></i>基础</a>

  </li>
        <li class="menu-item menu-item-轮子">

    <a href="/categories/lunzi" rel="section"><i class="download fa-fw"></i>轮子</a>

  </li>
        <li class="menu-item menu-item-漏洞库">

    <a href="/categories/fuxian" rel="section"><i class="download fa-fw"></i>漏洞库</a>

  </li>
        <li class="menu-item menu-item-工具">

    <a href="/categories/tools" rel="section"><i class="download fa-fw"></i>工具</a>

  </li>
        <li class="menu-item menu-item-代码审计">

    <a href="/categories/daima" rel="section"><i class="download fa-fw"></i>代码审计</a>

  </li>
        <li class="menu-item menu-item-逆向">

    <a href="/categories/nixiang" rel="section"><i class="download fa-fw"></i>逆向</a>

  </li>
        <li class="menu-item menu-item-应急响应">

    <a href="/categories/yingji" rel="section"><i class="download fa-fw"></i>应急响应</a>

  </li>
        <li class="menu-item menu-item-免杀">

    <a href="/categories/miansha" rel="section"><i class="download fa-fw"></i>免杀</a>

  </li>
        <li class="menu-item menu-item-靶场">

    <a href="/categories/bachang" rel="section"><i class="download fa-fw"></i>靶场</a>

  </li>
        <li class="menu-item menu-item-cve申请">

    <a href="/categories/cve" rel="section"><i class="download fa-fw"></i>cve申请</a>

  </li>
        <li class="menu-item menu-item-c语言">

    <a href="/categories/c" rel="section"><i class="download fa-fw"></i>c语言</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="https://wanheiqiyihu.top/2021/12/31/%E5%85%AD%E3%80%81%E5%AD%A6%E4%B9%A0py%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="十三">
      <meta itemprop="description" content="潜心学习，不骄不躁">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="十三の博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          六、学习py：文件操作的相关操作
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-12-31 18:28:04 / 修改时间：18:28:44" itemprop="dateCreated datePublished" datetime="2021-12-31T18:28:04+08:00">2021-12-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">-python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="六、学习py：文件操作的相关操作"><a href="#六、学习py：文件操作的相关操作" class="headerlink" title="六、学习py：文件操作的相关操作"></a>六、学习py：文件操作的相关操作</h1><h2 id="1-文件操作"><a href="#1-文件操作" class="headerlink" title="1.文件操作"></a>1.文件操作</h2><p>在正式学习文件操作之前，大火先来看一下数据类型和编码的一些知识。</p>
<p>1.字符串类型（str）,在程序中用于表示文字信息，本质上是unicode编码中的二进制。</p>
<p>2.字节类型(bytes)可表示文字信息，本质上是utf-8\gbk编码的二进制（对unicode进行了压缩方便文件存储和网络传输。）</p>
<p>图片也可以表示。</p>
<h3 id="1-1读文件"><a href="#1-1读文件" class="headerlink" title="1.1读文件"></a>1.1读文件</h3><h4 id="1-1-1读文本文件"><a href="#1-1-1读文本文件" class="headerlink" title="1.1.1读文本文件"></a>1.1.1读文本文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.打开文件</span></span><br><span class="line"><span class="comment">#  -路径</span></span><br><span class="line"><span class="comment">#     有相对路径和绝对路径</span></span><br><span class="line"><span class="comment">#  -模式</span></span><br><span class="line"><span class="comment">#  rb，表示读取文件的原始的二进制（r，read；b，二进制，binary）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">file_object = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode=<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line"><span class="comment">#读取文件</span></span><br><span class="line">data = file_object.read()</span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">file_object.close</span><br><span class="line"><span class="built_in">print</span>(data)<span class="comment">#这里读取的是字节类型</span></span><br><span class="line"><span class="comment">#这里面的file_object是一个对象，代表了&#x27;info.txt&#x27;那个文件</span></span><br><span class="line">text = data.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(text)<span class="comment">#这里读出来就是文本了</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在py中读文件的时候，内置了一个模块。</span></span><br><span class="line">file_object = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode=<span class="string">&#x27;rt&#x27;</span>,encoding = <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="comment">#这样读出来就直接是文本。</span></span><br></pre></td></tr></table></figure>

<h4 id="1-1-2读图片文件"><a href="#1-1-2读图片文件" class="headerlink" title="1.1.2读图片文件"></a>1.1.2读图片文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file_object = <span class="built_in">open</span>(<span class="string">&#x27;dhk.png&#x27;</span>,mode=<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">data = file_object.read()</span><br><span class="line">file_object.close<span class="comment">#这里读出来也是二进制。</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>1.在输入路径的时候，我建议还是使用绝对路径，相对路径很有可能会变化。</p>
<p>2.在写路径的时候，在路径的引号前面加上r，例如：防止系统将\new的\n认为是换行符。</p>
<p>3.如果文件不存在，程序会报错。</p>
<h4 id="1-1-3扩展：判断路径是否存在"><a href="#1-1-3扩展：判断路径是否存在" class="headerlink" title="1.1.3扩展：判断路径是否存在"></a>1.1.3扩展：判断路径是否存在</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">exists = os.path.exists(<span class="string">&quot;info.txt&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(exists)<span class="comment">#这里返回的是一个布尔值</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2写文件"><a href="#1-2写文件" class="headerlink" title="1.2写文件"></a>1.2写文件</h3><h4 id="1-2-1写文本文件"><a href="#1-2-1写文本文件" class="headerlink" title="1.2.1写文本文件"></a>1.2.1写文本文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file_object = <span class="built_in">open</span>(<span class="string">&quot;ex.txt&quot;</span>,mode=<span class="string">&#x27;wb&#x27;</span>)<span class="comment">#这个wb是指，write，二进制</span></span><br><span class="line">file_object.write(<span class="string">&quot;dhk&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file_object = <span class="built_in">open</span>(<span class="string">&quot;ex.txt&quot;</span>,mode=<span class="string">&#x27;wt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">file_object.write(<span class="string">&quot;dhk&quot;</span>)</span><br><span class="line">file_object.close()</span><br><span class="line"><span class="comment">#默认的encoding就是utf-8，当然你也可以自己去指定，所以我更推荐这种方法，不用每次写入都进行加密。</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-2写图片文件"><a href="#1-2-2写图片文件" class="headerlink" title="1.2.2写图片文件"></a>1.2.2写图片文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f1 = <span class="built_in">open</span>(<span class="string">&#x27;ex.png&#x27;</span>,mode = rb)</span><br><span class="line">content = f1</span><br><span class="line">f1.close()</span><br><span class="line"></span><br><span class="line">f2 = <span class="built_in">open</span>(<span class="string">&#x27;ex2.png&#x27;</span>,mode = wb)</span><br><span class="line">f2.write(content)</span><br><span class="line">f2.close()</span><br></pre></td></tr></table></figure>

<h4 id="1-2-3案例，实现用文本储存账户"><a href="#1-2-3案例，实现用文本储存账户" class="headerlink" title="1.2.3案例，实现用文本储存账户"></a>1.2.3案例，实现用文本储存账户</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">username = <span class="built_in">input</span>(<span class="string">&quot;请输入您的用户名字:&quot;</span>)</span><br><span class="line">password = <span class="built_in">input</span>(<span class="string">&quot;请输入您的密码: &quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span> = &#123;<span class="string">f&quot;<span class="subst">&#123;username&#125;</span>&quot;</span>:<span class="string">f&quot;<span class="subst">&#123;password&#125;</span>&quot;</span>&#125;</span><br><span class="line">content = <span class="built_in">open</span>(<span class="string">&quot;info.txt&quot;</span>,mode=<span class="string">&#x27;wt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">content.write(<span class="string">f&quot;<span class="subst">&#123;<span class="built_in">list</span>&#125;</span>&quot;</span>)</span><br><span class="line">content.close()</span><br><span class="line"><span class="comment">#使用w写入文件的时候，会先清空文件，再在文件中写入内容。并不会直接在原来的文档里面加入内容，所以要实现多用户注册，就不能让他多次open文件。</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-4案例，实现多用户的注册"><a href="#1-2-4案例，实现多用户的注册" class="headerlink" title="1.2.4案例，实现多用户的注册"></a>1.2.4案例，实现多用户的注册</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">content = <span class="built_in">open</span>(<span class="string">&quot;info.txt&quot;</span>, mode=<span class="string">&#x27;wt&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    username = <span class="built_in">input</span>(<span class="string">&quot;请输入您的用户名字(输入q退出):&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> username.upper() == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    password = <span class="built_in">input</span>(<span class="string">&quot;请输入您的密码: &quot;</span>)</span><br><span class="line">    <span class="built_in">list</span> = &#123;<span class="string">f&quot;<span class="subst">&#123;username&#125;</span>&quot;</span>:<span class="string">f&quot;<span class="subst">&#123;password&#125;</span>&quot;</span>&#125;</span><br><span class="line">    n = <span class="string">&quot;\n&quot;</span></span><br><span class="line">    content.write(<span class="string">f&quot;<span class="subst">&#123;<span class="built_in">list</span>&#125;</span>&quot;</span>+<span class="string">f&quot;<span class="subst">&#123;n&#125;</span>&quot;</span>)</span><br><span class="line">content.close()</span><br><span class="line"></span><br><span class="line"><span class="comment">#将文件的开关都放在while循环的外面，这样就不会多次打开文件导致文件的内容清零，相对的关闭文件也要放在循环外面，防止多次关闭文件导致程序报错。</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-5案例，实现在网络上获取内容并且写入文件"><a href="#1-2-5案例，实现在网络上获取内容并且写入文件" class="headerlink" title="1.2.5案例，实现在网络上获取内容并且写入文件"></a>1.2.5案例，实现在网络上获取内容并且写入文件</h4><p>在这里会使用一个第三方的模块(可以伪造浏览器向网站发送请求)</p>
<p>使用终端安装</p>
<p>pip install requests</p>
<p>模块的使用方法（这里只是在这里说一下常用的一个方法，关于模块后面会介绍）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">r=requests.get(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(r)</span><br><span class="line">r.status_code</span><br><span class="line"><span class="built_in">print</span>(r.content)</span><br><span class="line"><span class="comment">#后面会讲到,然后这里再在后面加入写入文件的功能就好了.</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3文件打开模式"><a href="#1-3文件打开模式" class="headerlink" title="1.3文件打开模式"></a>1.3文件打开模式</h3><h4 id="1-3-1下面将介绍各种模式"><a href="#1-3-1下面将介绍各种模式" class="headerlink" title="1.3.1下面将介绍各种模式"></a>1.3.1下面将介绍各种模式</h4><p>r 读取</p>
<p>w 重新编写这个文件</p>
<p>x 创建一个新的文件，并进行编辑</p>
<p>a 打开一个文件，在它的末尾加入内容</p>
<p>b 二进制模式</p>
<p>t文本模式</p>
<p><img src="/2021/12/31/%E5%85%AD%E3%80%81%E5%AD%A6%E4%B9%A0py%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/Users\wanheiqiyihu\AppData\Roaming\Typora\typora-user-images\image-20211230172323356.png" alt="image-20211230172323356"></p>
<p>扩展：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text.seek(<span class="number">0</span>)<span class="comment">#将光标置于第一个位置，也就是起始位置。</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/python-coder/p/10078253.html">python文件操作打开模式 r,w,a,r+,w+,a+ 区别辨析 - 少年与python - 博客园 (cnblogs.com)</a></p>
<h3 id="1-4常见功能"><a href="#1-4常见功能" class="headerlink" title="1.4常见功能"></a>1.4常见功能</h3><p>在上述中我们只使用了读写功能，其实还有很多的辅助功能。</p>
<h4 id="1-4-1read读所有"><a href="#1-4-1read读所有" class="headerlink" title="1.4.1read读所有"></a>1.4.1read读所有</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode = <span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">data = f.read()</span><br></pre></td></tr></table></figure>

<h4 id="1-4-2read-读指定的内容"><a href="#1-4-2read-读指定的内容" class="headerlink" title="1.4.2read()读指定的内容"></a>1.4.2read()读指定的内容</h4><p>在文件上传的时候大多也会使用这种方式，一点字节一点字节的发送。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode = <span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">data = f.read(<span class="number">2</span>)<span class="comment">#读取2个字符</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode = <span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">a = f.read(<span class="number">1</span>)<span class="comment">#读取第1个字符</span></span><br><span class="line">b = f.read(<span class="number">1</span>)</span><br><span class="line">c = f.read(<span class="number">1</span>)</span><br><span class="line">d = f.read(<span class="number">1</span>)</span><br><span class="line">e = f.read(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(a,b,c,d,e)</span><br><span class="line"><span class="comment">#一个一个字符的读取，由于光标在每一次读取后都会往后推进一个，所以每一次读取的内容是不一样的。</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-3readline-读一行"><a href="#1-4-3readline-读一行" class="headerlink" title="1.4.3readline()读一行"></a>1.4.3readline()读一行</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode = <span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">data = f.readline(<span class="number">2</span>)<span class="comment">#读取第二行的内容</span></span><br><span class="line"><span class="comment">#一般用于处理庞大的文件，如果直接用read会导致内存崩溃，but readline每次只读取一行内容，极大的减少了内存的负担。</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-4readlines-读取所有行，返回一个列表，其中每一个元素是每一行的内容。"><a href="#1-4-4readlines-读取所有行，返回一个列表，其中每一个元素是每一行的内容。" class="headerlink" title="1.4.4readlines()读取所有行，返回一个列表，其中每一个元素是每一行的内容。"></a>1.4.4readlines()读取所有行，返回一个列表，其中每一个元素是每一行的内容。</h4><h4 id="1-4-5for循环"><a href="#1-4-5for循环" class="headerlink" title="1.4.5for循环"></a>1.4.5for循环</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode = <span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">    <span class="built_in">print</span>(line.strip())<span class="comment">#删除每一行的换行符，因为每一次循环print的时候也会有一个换行符。</span></span><br><span class="line"><span class="comment">#输出</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">小丑</span></span><br><span class="line"><span class="string">动感</span></span><br><span class="line"><span class="string">joker</span></span><br><span class="line"><span class="string">你好</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-6write，写"><a href="#1-4-6write，写" class="headerlink" title="1.4.6write，写"></a>1.4.6write，写</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode = <span class="string">&#x27;a&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">f.write(<span class="string">&quot;dhk&quot;</span>)</span><br><span class="line">f.close</span><br></pre></td></tr></table></figure>

<h4 id="1-4-7flush-刷到硬盘"><a href="#1-4-7flush-刷到硬盘" class="headerlink" title="1.4.7flush,刷到硬盘"></a>1.4.7flush,刷到硬盘</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode = <span class="string">&#x27;a&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    f.write(<span class="string">&quot;dhk&quot;</span>)</span><br><span class="line">    <span class="comment">#不是写到了硬盘，而是写在缓冲区，系统会将缓冲区的内容刷到硬盘。</span></span><br><span class="line">    f.flush()<span class="comment">#直接刷到硬盘</span></span><br><span class="line">f.close</span><br></pre></td></tr></table></figure>

<h4 id="1-4-8移动光标位置（字节）"><a href="#1-4-8移动光标位置（字节）" class="headerlink" title="1.4.8移动光标位置（字节）"></a>1.4.8移动光标位置（字节）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode (= <span class="string">&#x27;r+&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">f.seek(<span class="number">1</span>)</span><br><span class="line"><span class="comment">#将光标移动到指定位置。</span></span><br></pre></td></tr></table></figure>

<p>注意：在a模式下，write只会写到文件的最后，不会写到指定的光标位置。</p>
<h4 id="1-4-9获取光标位置"><a href="#1-4-9获取光标位置" class="headerlink" title="1.4.9获取光标位置"></a>1.4.9获取光标位置</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode (= <span class="string">&#x27;r+&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">p1 = f.tell()</span><br><span class="line"><span class="built_in">print</span>(p1)         </span><br></pre></td></tr></table></figure>

<h3 id="1-5上下文管理"><a href="#1-5上下文管理" class="headerlink" title="1.5上下文管理"></a>1.5上下文管理</h3><p>之前对文件进行操作的时候，每次都要打开和关闭文件，比较繁琐且容易忘记关闭文件。</p>
<p>以后再进行文件操作时，推荐大家使用with上下文管理，他可以实现自动关闭文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode (= <span class="string">&#x27;r+&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f</span><br><span class="line">          data = f.read()</span><br><span class="line">          <span class="built_in">print</span>(data)</span><br><span class="line"><span class="comment">#在缩进结束的时候，他就会自动的帮你关闭文件。</span></span><br></pre></td></tr></table></figure>

<p>在python2.7后，with又支持同时对多个文件的上下文进行管理，即：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode (= <span class="string">&#x27;r+&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f,<span class="built_in">open</span>(<span class="string">&#x27;info2.txt&#x27;</span>,mode (= <span class="string">&#x27;r+&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f2</span><br><span class="line">                                                              <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h3 id="1-6功能扩展：从指定的网址爬取视频"><a href="#1-6功能扩展：从指定的网址爬取视频" class="headerlink" title="1.6功能扩展：从指定的网址爬取视频"></a>1.6功能扩展：从指定的网址爬取视频</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;user-agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36&quot;</span>,</span><br><span class="line">&#125;<span class="comment">#指定文件头</span></span><br><span class="line">url =<span class="string">&quot;https://video.pearvideo.com/mp4/adshort/20200709/cont-1684816-15252785_adpkg-ad_hd.mp4&quot;</span></span><br><span class="line">response = requests.get(url,headers=headers,stream=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#介绍一下这个stream模块</span></span><br><span class="line"><span class="comment">#当stream=True时，如果是下载大的文件时，用True，可以先对请求的类型进行判断，如果是大文件，可以中止请求，而不用浪费大流量开销。如果不加stream=True，那么硬盘很可能就不停被写入，文件会变得无比巨大，最后磁盘空间不够死机。</span></span><br><span class="line"><span class="comment">#当stream=False时，如果是请求的大文件，其会进入内存并进行下载，消费大量的内存和流量。</span></span><br><span class="line"><span class="built_in">print</span>(response.status_code)</span><br><span class="line"><span class="built_in">print</span>(response.headers[<span class="string">&#x27;content-length&#x27;</span>])</span><br><span class="line">content_size = <span class="built_in">int</span>(response.headers[<span class="string">&#x27;content-length&#x27;</span>])</span><br><span class="line"><span class="comment"># print(response.text)</span></span><br><span class="line"><span class="comment"># print(response.content)</span></span><br><span class="line">n = <span class="number">1</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;v.mp4&quot;</span>,<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> response.iter_content(chunk_size=<span class="number">1024</span>):<span class="comment">#这个进度条我是偷别人的嘿嘿。</span></span><br><span class="line">        rate=n*<span class="number">1024</span>/content_size</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;下载进度：&#123;0:%&#125;&quot;</span>.<span class="built_in">format</span>(rate))</span><br><span class="line">        f.write(i)</span><br><span class="line">        n+=<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;下载完成&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>第二个扩展，将一个文件中的其中一个字符修改成另外一个字符</p>
<p>小文件：文件读到内存，再通过replace</p>
<p>大小文件都可以使用：同时打开两个文件，读+写</p>
<p>这里演示一下第二种思路。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;info.txt&#x27;</span>,mode=<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> c1 , <span class="built_in">open</span>(<span class="string">&#x27;new.txt&#x27;</span>,mode=<span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> c2:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> c1:</span><br><span class="line">        new_line = line.replace(<span class="string">&#x27;joker&#x27;</span>,<span class="string">&#x27;dhk&#x27;</span>)</span><br><span class="line">        c2.write(<span class="string">f&#x27;<span class="subst">&#123;new_line&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment">#重命名文件之后就可以覆盖掉原文件</span></span><br><span class="line"><span class="comment">#imort shutil</span></span><br><span class="line"><span class="comment">#shutil.move(&#x27;new.txt&#x27;,&#x27;info.txt&#x27;)</span></span><br></pre></td></tr></table></figure>

<h2 id="2-csv格式文件"><a href="#2-csv格式文件" class="headerlink" title="2.csv格式文件"></a>2.csv格式文件</h2><p>逗号分隔值（有时候也被称为字符分隔值），其文件以纯文本形式 储存表格数据（数字和文本）。</p>
<p>对于这种格式的数据，我们需要利用open函数来读取文件并根据逗号分隔的特点进行处理。</p>
<h3 id="2-1扩充函数"><a href="#2-1扩充函数" class="headerlink" title="2.1扩充函数"></a>2.1扩充函数</h3><p>在当前根目录下创建一个文件夹。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.makedirs(<span class="string">&quot;name&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="3-ini格式"><a href="#3-ini格式" class="headerlink" title="3.ini格式"></a>3.ini格式</h2><p>ini文件是initialization File的缩写，平时用于储存软件的配置文件。例如：Mysql数据库的配置文件。</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/jhabb/archive/2010/12/01/1893454.html">ini文件示例说明 - 落冰 - 博客园 (cnblogs.com)</a></p>
<p>这种格式是可以直接使用open出来，考虑到自己处理比较麻烦，所以python为我们提供了更为方便的方式。</p>
<h3 id="3-1读取所有节点"><a href="#3-1读取所有节点" class="headerlink" title="3.1读取所有节点"></a>3.1读取所有节点</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">&#x27;mysql.ini&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)<span class="comment">#可以是相对路径也可以是绝对路径</span></span><br><span class="line">result = config.sections()<span class="comment">#获取所有的节点，返回一个列表</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2获取节点下面的键值"><a href="#3-2获取节点下面的键值" class="headerlink" title="3.2获取节点下面的键值"></a>3.2获取节点下面的键值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">&#x27;mysql.ini&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)<span class="comment">#可以是相对路径也可以是绝对路径</span></span><br><span class="line">result = config.items(<span class="string">&#x27;节点&#x27;</span>)<span class="comment">#获取指定节点下面的键值，返回一个嵌套着元组的列表。</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3获取某一个节点下的键对应的值"><a href="#3-3获取某一个节点下的键对应的值" class="headerlink" title="3.3获取某一个节点下的键对应的值"></a>3.3获取某一个节点下的键对应的值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">&#x27;mysql.ini&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)<span class="comment">#可以是相对路径也可以是绝对路径</span></span><br><span class="line">result = config.get(<span class="string">&#x27;节点&#x27;</span>,<span class="string">&#x27;键&#x27;</span>)<span class="comment">#获取某一个节点下的键对应的值</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4其他功能"><a href="#3-4其他功能" class="headerlink" title="3.4其他功能"></a>3.4其他功能</h3><h4 id="3-4-1判断文件是否有这个节点"><a href="#3-4-1判断文件是否有这个节点" class="headerlink" title="3.4.1判断文件是否有这个节点"></a>3.4.1判断文件是否有这个节点</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">&#x27;mysql.ini&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)<span class="comment">#可以是相对路径也可以是绝对路径</span></span><br><span class="line">result = config.has_section(<span class="string">&#x27;节点&#x27;</span>)<span class="comment">#判断是否有这个节点，返回布尔值。</span></span><br></pre></td></tr></table></figure>

<h4 id="3-4-2添加一个节点"><a href="#3-4-2添加一个节点" class="headerlink" title="3.4.2添加一个节点"></a>3.4.2添加一个节点</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">&#x27;mysql.ini&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)<span class="comment">#可以是相对路径也可以是绝对路径)</span></span><br><span class="line">config.add_section(<span class="string">&#x27;节点&#x27;</span>)<span class="comment">#只是写到内存中，但是没有到硬盘中</span></span><br><span class="line">config.<span class="built_in">set</span>(<span class="string">&#x27;节点&#x27;</span>,<span class="string">&#x27;键&#x27;</span>,<span class="string">&#x27;值&#x27;</span>,)</span><br><span class="line">config.write(<span class="built_in">open</span>(<span class="string">&#x27;文件名&#x27;</span>,mode=<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>))<span class="comment">#这样才会写到文件里面</span></span><br></pre></td></tr></table></figure>

<h4 id="3-4-3删除"><a href="#3-4-3删除" class="headerlink" title="3.4.3删除"></a>3.4.3删除</h4><p>删除节点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">&#x27;mysql.ini&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)<span class="comment">#可以是相对路径也可以是绝对路径)</span></span><br><span class="line">config.remove_section(<span class="string">&#x27;节点&#x27;</span>)</span><br><span class="line">config.write(<span class="built_in">open</span>(<span class="string">&#x27;文件名&#x27;</span>,mode=<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>删除键</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.remove_option(<span class="string">&#x27;节点&#x27;</span>,<span class="string">&#x27;键&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="4-XML格式文件"><a href="#4-XML格式文件" class="headerlink" title="4.XML格式文件"></a>4.XML格式文件</h2><p>可扩展标记语言，是一种简单的数据存储语言，XML被设计用来传输和存储数据。</p>
<p>1.存储，可用来存放配置文件，例如：java的配置文件。</p>
<p>2.传输，网络传输是以这种格式存在，例如早期ajax传输的数据集，soap协议等。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34272143/article/details/87164488">(27条消息) XML文件详解以及解析_浮华蒲公英的博客-CSDN博客_xml文件</a></p>
<h3 id="4-1以country-xml为例，内容如下"><a href="#4-1以country-xml为例，内容如下" class="headerlink" title="4.1以country.xml为例，内容如下"></a>4.1以country.xml为例，内容如下</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">&quot;Liechtenstein&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">&quot;yes&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2008<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>141100<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">name</span>=<span class="string">&quot;Austria&quot;</span> <span class="attr">direction</span>=<span class="string">&quot;E&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">name</span>=<span class="string">&quot;Switzerland&quot;</span> <span class="attr">direction</span>=<span class="string">&quot;W&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">&quot;Singapore&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">&quot;yes&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2011<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>59900<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">name</span>=<span class="string">&quot;Malaysia&quot;</span> <span class="attr">direction</span>=<span class="string">&quot;N&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">&quot;Panama&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">&quot;yes&quot;</span>&gt;</span>69<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2011<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>13600<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">name</span>=<span class="string">&quot;Costa Rica&quot;</span> <span class="attr">direction</span>=<span class="string">&quot;W&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">name</span>=<span class="string">&quot;Colombia&quot;</span> <span class="attr">direction</span>=<span class="string">&quot;E&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2解析"><a href="#4-2解析" class="headerlink" title="4.2解析"></a>4.2解析</h3><p>1)调用parse()方法，返回解析树</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3.3之后ElementTree模块会自动寻找可用的C库来加快速度</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">import</span> xml.etree.cElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line">tree = ET.parse(<span class="string">&quot;country.xml&quot;</span>)  <span class="comment"># &lt;class &#x27;xml.etree.ElementTree.ElementTree&#x27;&gt;</span></span><br><span class="line">root = tree.getroot()           <span class="comment"># 获取根节点 &lt;Element &#x27;data&#x27; at 0x02BF6A80&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="2-调用from-string-返回解析树的根元素"><a href="#2-调用from-string-返回解析树的根元素" class="headerlink" title="2)调用from_string(),返回解析树的根元素"></a>2)调用from_string(),返回解析树的根元素</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line">data = <span class="built_in">open</span>(<span class="string">&quot;country.xml&quot;</span>).read()</span><br><span class="line">root = ET.fromstring(data)   <span class="comment"># &lt;Element &#x27;data&#x27; at 0x036168A0&gt;</span></span><br></pre></td></tr></table></figure>

<p>3)调用ElementTree类ElementTree(self, element=None, file=None)  # 这里的element作为根节点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line">tree = ET.ElementTree(file=<span class="string">&quot;country.xml&quot;</span>)  <span class="comment"># &lt;xml.etree.ElementTree.ElementTree object at 0x03031390&gt;</span></span><br><span class="line">root = tree.getroot()  <span class="comment"># &lt;Element &#x27;data&#x27; at 0x030EA600&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3遍历"><a href="#4-3遍历" class="headerlink" title="4.3遍历"></a>4.3遍历</h3><p>1)简单遍历</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line">tree = ET.parse(<span class="string">&quot;country.xml&quot;</span>)</span><br><span class="line">root = tree.getroot()</span><br><span class="line"><span class="built_in">print</span>(root.tag, <span class="string">&quot;:&quot;</span>, root.attrib)  <span class="comment"># 打印根元素的tag和属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历xml文档的第二层</span></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> root:</span><br><span class="line">    <span class="comment"># 第二层节点的标签名称和属性</span></span><br><span class="line">    <span class="built_in">print</span>(child.tag,<span class="string">&quot;:&quot;</span>, child.attrib) </span><br><span class="line">    <span class="comment"># 遍历xml文档的第三层</span></span><br><span class="line">    <span class="keyword">for</span> children <span class="keyword">in</span> child:</span><br><span class="line">        <span class="comment"># 第三层节点的标签名称和属性</span></span><br><span class="line">        <span class="built_in">print</span>(children.tag, <span class="string">&quot;:&quot;</span>, children.attrib)</span><br></pre></td></tr></table></figure>

<p>可以通过下标的方式直接访问节点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 访问根节点下第一个country的第二个节点year,获取对应的文本</span></span><br><span class="line">year = root[<span class="number">0</span>][<span class="number">1</span>].text    <span class="comment"># 2008</span></span><br></pre></td></tr></table></figure>

<p>2)ElementTree提供的方法</p>
<ul>
<li><code>find</code>(<em>match)                           # 查找第一个匹配的子元素， match可以时tag或是xpaht路径</em></li>
<li><em><code>findall</code>(*match*)                        # 返回所有匹配的子元素列表</em></li>
<li><code>findtext</code>(<em>match</em>, <em>default=None</em>)           # </li>
<li><code>iter</code>(<em>tag=None)                        # 以当前元素为根节点 创建树迭代器,如果tag不为None,则以tag进行过滤</em></li>
<li><em><code>iterfind</code>(*match*)                       #</em> </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 过滤出所有neighbor标签</span></span><br><span class="line"><span class="keyword">for</span> neighbor <span class="keyword">in</span> root.<span class="built_in">iter</span>(<span class="string">&quot;neighbor&quot;</span>):</span><br><span class="line">    <span class="built_in">print</span>(neighbor.tag, <span class="string">&quot;:&quot;</span>, neighbor.attrib)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 遍历所有的counry标签</span></span><br><span class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root.findall(<span class="string">&quot;country&quot;</span>):</span><br><span class="line">    <span class="comment"># 查找country标签下的第一个rank标签</span></span><br><span class="line">    rank = country.find(<span class="string">&quot;rank&quot;</span>).text</span><br><span class="line">    <span class="comment"># 获取country标签的name属性</span></span><br><span class="line">    name = country.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(name, rank)</span><br></pre></td></tr></table></figure>

<h3 id="4-4修改xml结构"><a href="#4-4修改xml结构" class="headerlink" title="4.4修改xml结构"></a>4.4修改xml结构</h3><ol>
<li>属性相关</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将所有的rank值加1,并添加属性updated为yes</span></span><br><span class="line"><span class="keyword">for</span> rank <span class="keyword">in</span> root.<span class="built_in">iter</span>(<span class="string">&quot;rank&quot;</span>):</span><br><span class="line">    new_rank = <span class="built_in">int</span>(rank.text) + <span class="number">1</span></span><br><span class="line">    rank.text = <span class="built_in">str</span>(new_rank)  <span class="comment"># 必须将int转为str</span></span><br><span class="line">    rank.<span class="built_in">set</span>(<span class="string">&quot;updated&quot;</span>, <span class="string">&quot;yes&quot;</span>) <span class="comment"># 添加属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 再终端显示整个xml</span></span><br><span class="line">ET.dump(root)</span><br><span class="line"><span class="comment"># 注意 修改的内容存在内存中 尚未保存到文件中</span></span><br><span class="line"><span class="comment"># 保存修改后的内容</span></span><br><span class="line">tree.write(<span class="string">&quot;output.xml&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line">tree = ET.parse(<span class="string">&quot;output.xml&quot;</span>)</span><br><span class="line">root = tree.getroot()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> rank <span class="keyword">in</span> root.<span class="built_in">iter</span>(<span class="string">&quot;rank&quot;</span>):</span><br><span class="line">    <span class="comment"># attrib为属性字典</span></span><br><span class="line">    <span class="comment"># 删除对应的属性updated</span></span><br><span class="line">    <span class="keyword">del</span> rank.attrib[<span class="string">&#x27;updated&#x27;</span>]  </span><br><span class="line"></span><br><span class="line">ET.dump(root)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>节点/元素 相关</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line">tree = ET.parse(<span class="string">&quot;country.xml&quot;</span>)</span><br><span class="line">root = tree.getroot()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除rank大于50的国家</span></span><br><span class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root.<span class="built_in">iter</span>(<span class="string">&quot;country&quot;</span>):</span><br><span class="line">    rank = <span class="built_in">int</span>(country.find(<span class="string">&quot;rank&quot;</span>).text)</span><br><span class="line">    <span class="keyword">if</span> rank &gt; <span class="number">50</span>:</span><br><span class="line">        <span class="comment"># remove()方法 删除子元素</span></span><br><span class="line">        root.remove(country)</span><br><span class="line"></span><br><span class="line">ET.dump(root)</span><br></pre></td></tr></table></figure>

<p>添加子元素</p>
<p>代码:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line">tree = ET.parse(<span class="string">&quot;country.xml&quot;</span>)</span><br><span class="line">root = tree.getroot()</span><br><span class="line"></span><br><span class="line">country = root[<span class="number">0</span>]</span><br><span class="line">last_ele = country[<span class="built_in">len</span>(<span class="built_in">list</span>(country))-<span class="number">1</span>]</span><br><span class="line">last_ele.tail = <span class="string">&#x27;\n\t\t&#x27;</span></span><br><span class="line"><span class="comment"># 创建新的元素, tag为test_append</span></span><br><span class="line">elem1 = ET.Element(<span class="string">&quot;test_append&quot;</span>)</span><br><span class="line">elem1.text = <span class="string">&quot;elem 1&quot;</span></span><br><span class="line"><span class="comment"># elem.tail = &#x27;\n\t&#x27;</span></span><br><span class="line">country.append(elem1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># SubElement() 其实内部调用的时append()</span></span><br><span class="line">elem2 = ET.SubElement(country, <span class="string">&quot;test_subelement&quot;</span>)</span><br><span class="line">elem2.text = <span class="string">&quot;elem 2&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># extend()</span></span><br><span class="line">elem3 = ET.Element(<span class="string">&quot;test_extend&quot;</span>)</span><br><span class="line">elem3.text = <span class="string">&quot;elem 3&quot;</span></span><br><span class="line">elem4 = ET.Element(<span class="string">&quot;test_extend&quot;</span>)</span><br><span class="line">elem4.text = <span class="string">&quot;elem 4&quot;</span></span><br><span class="line">country.extend([elem3, elem4])</span><br><span class="line"></span><br><span class="line"><span class="comment"># insert()</span></span><br><span class="line">elem5 = ET.Element(<span class="string">&quot;test_insert&quot;</span>)</span><br><span class="line">elem5.text = <span class="string">&quot;elem 5&quot;</span></span><br><span class="line">country.insert(<span class="number">5</span>, elem5)</span><br><span class="line"></span><br><span class="line">ET.dump(country)</span><br></pre></td></tr></table></figure>

<h3 id="4-5创建xml文档"><a href="#4-5创建xml文档" class="headerlink" title="4.5创建xml文档"></a>4.5创建xml文档</h3><p>想创建root Element,然后创建SubElement,最后将root element传入ElementTree(element),创建tree，调用tree.write()方法写入文件</p>
<p>对于创建元素的3个方法: 使用ET.Element、Element对象的makeelement()方法以及ET.SubElement</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">subElement</span>(<span class="params">root, tag, text</span>):</span></span><br><span class="line">    ele = ET.SubElement(root, tag)</span><br><span class="line">    ele.text = text</span><br><span class="line">    ele.tail = <span class="string">&#x27;\n&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root = ET.Element(<span class="string">&quot;note&quot;</span>)</span><br><span class="line"></span><br><span class="line">to = root.makeelement(<span class="string">&quot;to&quot;</span>, &#123;&#125;)</span><br><span class="line">to.text = <span class="string">&quot;peter&quot;</span></span><br><span class="line">to.tail = <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">root.append(to)</span><br><span class="line"></span><br><span class="line">subElement(root, <span class="string">&quot;from&quot;</span>, <span class="string">&quot;marry&quot;</span>)</span><br><span class="line">subElement(root, <span class="string">&quot;heading&quot;</span>, <span class="string">&quot;Reminder&quot;</span>)</span><br><span class="line">subElement(root, <span class="string">&quot;body&quot;</span>, <span class="string">&quot;Don&#x27;t forget the meeting!&quot;</span>)</span><br><span class="line"></span><br><span class="line">tree = ET.ElementTree(root)</span><br><span class="line">tree.write(<span class="string">&quot;note.xml&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>, xml_declaration=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>由于原生保存的XML时默认无缩进，如果想要设置缩进的话， 需要修改保存方式</p>
<p> 代码:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">from</span> xml.dom <span class="keyword">import</span> minidom</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">subElement</span>(<span class="params">root, tag, text</span>):</span></span><br><span class="line">    ele = ET.SubElement(root, tag)</span><br><span class="line">    ele.text = text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">saveXML</span>(<span class="params">root, filename, indent=<span class="string">&quot;\t&quot;</span>, newl=<span class="string">&quot;\n&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span></span>):</span></span><br><span class="line">    rawText = ET.tostring(root)</span><br><span class="line">    dom = minidom.parseString(rawText)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        dom.writexml(f, <span class="string">&quot;&quot;</span>, indent, newl, encoding)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root = ET.Element(<span class="string">&quot;note&quot;</span>)</span><br><span class="line"></span><br><span class="line">to = root.makeelement(<span class="string">&quot;to&quot;</span>, &#123;&#125;)</span><br><span class="line">to.text = <span class="string">&quot;peter&quot;</span></span><br><span class="line">root.append(to)</span><br><span class="line"></span><br><span class="line">subElement(root, <span class="string">&quot;from&quot;</span>, <span class="string">&quot;marry&quot;</span>)</span><br><span class="line">subElement(root, <span class="string">&quot;heading&quot;</span>, <span class="string">&quot;Reminder&quot;</span>)</span><br><span class="line">subElement(root, <span class="string">&quot;body&quot;</span>, <span class="string">&quot;Don&#x27;t forget the meeting!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存xml文件</span></span><br><span class="line">saveXML(root, <span class="string">&quot;note.xml&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="5-Excel格式文件"><a href="#5-Excel格式文件" class="headerlink" title="5.Excel格式文件"></a>5.Excel格式文件</h2><p>python中没有提供处理Excel文件的功能，想要在python中操作Excel需要安装第三方的模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install openpyxl</span><br></pre></td></tr></table></figure>

<h3 id="5-1读Excel"><a href="#5-1读Excel" class="headerlink" title="5.1读Excel"></a>5.1读Excel</h3><h4 id="5-1-1读sheet"><a href="#5-1-1读sheet" class="headerlink" title="5.1.1读sheet"></a>5.1.1读sheet</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_wrokbook</span><br><span class="line">wb = load_wrokbook(<span class="string">&#x27;#文件路径&#x27;</span>)</span><br><span class="line"><span class="comment">#sheet相关操作</span></span><br><span class="line"><span class="comment">#1获取所有sheet</span></span><br><span class="line"><span class="built_in">print</span>(wb.sheetnames)<span class="comment">#返回一个列表，获取所有sheet</span></span><br><span class="line"><span class="comment">#2.选中一个sheet，基于sheet名称</span></span><br><span class="line">sheet = wb[<span class="string">&quot;#sheet名称&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(sheet.cell(<span class="number">1</span>,<span class="number">1</span>)<span class="comment">#读取第一行第一列的单元格)</span></span><br><span class="line"><span class="comment">#3.选中一个sheet，基于索引位置</span></span><br><span class="line">sheet = wb.worksheets[<span class="number">0</span>]<span class="comment">#取索引位置为0的sheet</span></span><br><span class="line"><span class="comment">#4.循环所有的sheet</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> wb.sheetnames:</span><br><span class="line">      sheet = wb[name]</span><br><span class="line">      </span><br><span class="line"><span class="keyword">for</span> sheet <span class="keyword">in</span> wb,worksheets:</span><br><span class="line">      cell = sheet.cell(<span class="number">1</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h4 id="5-1-2读取单元格"><a href="#5-1-2读取单元格" class="headerlink" title="5.1.2读取单元格"></a>5.1.2读取单元格</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_wrokbook</span><br><span class="line">wb = load_wrokbook(<span class="string">&#x27;#文件路径&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(wb.sheetnames)</span><br><span class="line">sheet = wb[<span class="string">&quot;#sheet名称&quot;</span>]</span><br><span class="line"><span class="comment">#获取第n行第n列单元格</span></span><br><span class="line">cell = sheet.cell(<span class="number">1</span>,<span class="number">1</span>)<span class="comment">#这里要注意单元格是从1开始的，不是从0开始的。</span></span><br><span class="line">cell.value<span class="comment">#即为单元格中的文本内容</span></span><br><span class="line">cell.style<span class="comment">#样式</span></span><br><span class="line">cell.font<span class="comment">#字体</span></span><br><span class="line">cell.alignment<span class="comment">#排列情况，居中等</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取第n行所有的单元格</span></span><br><span class="line"><span class="keyword">for</span> cell <span class="keyword">in</span> sheet[<span class="number">1</span>]:</span><br><span class="line">    <span class="built_in">print</span>(cell.value)</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取所有行的数据</span></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> sheet.rows:<span class="comment">#每一行是一个元组,所以第一个索引是0开始。</span></span><br><span class="line">    <span class="built_in">print</span>(row)</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取每一列的数据</span></span><br><span class="line"><span class="keyword">for</span> columns <span class="keyword">in</span> sheet.clumnss:</span><br><span class="line">    <span class="built_in">print</span> (clumns.value)</span><br></pre></td></tr></table></figure>

<h3 id="5-2写Excel"><a href="#5-2写Excel" class="headerlink" title="5.2写Excel"></a>5.2写Excel</h3><p>在Excel中想要写文件，大致要分为在：</p>
<h4 id="5-2-1在原Excel文件基础上写内容。"><a href="#5-2-1在原Excel文件基础上写内容。" class="headerlink" title="5.2.1在原Excel文件基础上写内容。"></a>5.2.1在原Excel文件基础上写内容。</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> workbook</span><br><span class="line">wb = load_workbook(<span class="string">&#x27;files/p1.xlsx&#x27;</span>)</span><br><span class="line">sheet = wb.worksheetts(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#找到单元格，并修改单元格内容</span></span><br><span class="line">cell = sheet.cell(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">cell.value = <span class="string">&#x27;新的开始&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将Excel文件保存的到p2.xlsx文件中</span></span><br><span class="line">wb.save(<span class="string">&#x27;files/p2.xlsx&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="5-2-2新创建Excel文件写内容"><a href="#5-2-2新创建Excel文件写内容" class="headerlink" title="5.2.2新创建Excel文件写内容"></a>5.2.2新创建Excel文件写内容</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> workbook</span><br><span class="line"><span class="comment">#创建一个Excel且默认会创建一个sheet（名称为Sheet）</span></span><br><span class="line">wb = workbook.Workbook</span><br><span class="line">sheet = wb.worksheets[<span class="number">0</span>]<span class="comment">#或者sheet = wb[&quot;Sheet&quot;]</span></span><br><span class="line"><span class="comment">#找到单元格，并修改单元格的内容</span></span><br><span class="line">cell = sheet.cell(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">cell.value = <span class="string">&quot;新的开始&quot;</span></span><br><span class="line"><span class="comment">#将Excel文件保存到p2.xlsx</span></span><br><span class="line">wb.sava(<span class="string">&quot;file/p2.xlsx&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="6-压缩文件"><a href="#6-压缩文件" class="headerlink" title="6.压缩文件"></a>6.压缩文件</h2><p>基于python内置的shutil模块可以实现对压缩文件的操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="comment">#1.压缩文件</span></span><br><span class="line"><span class="comment">#base_name 压缩后的压缩包文件</span></span><br><span class="line"><span class="comment">#format 压缩的格式，例如“zip”，“tar”</span></span><br><span class="line"><span class="comment">#root_dir 要压缩的文件路径</span></span><br><span class="line">shutil.make_archive(base_name=<span class="string">r&#x27;D:\xxx\xxx\xx&#x27;</span>,<span class="built_in">format</span>=<span class="string">&#x27;zip&#x27;</span>,root_dir=<span class="string">r&#x27;D:\xxx\xxx\xx&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.解压文件</span></span><br><span class="line"><span class="comment">#filename,要解压的压缩包文件</span></span><br><span class="line"><span class="comment">#extract_dir,解压的路径</span></span><br><span class="line"><span class="comment">#format,压缩文件格式</span></span><br><span class="line">shutil.unpack_archive(filename=<span class="string">r&quot;D:\xxx\xxx\xx&#x27;,extract_dir=r&#x27;D:\xxx\xxx\xx&#x27;,format=&#x27;zip&#x27;)#这里路径前面加上r的目的是为了防止斜杠和字母形成特殊符号。</span></span><br></pre></td></tr></table></figure>

<h2 id="7-路径相关"><a href="#7-路径相关" class="headerlink" title="7.路径相关"></a>7.路径相关</h2><h3 id="7-1查看目录"><a href="#7-1查看目录" class="headerlink" title="7.1查看目录"></a>7.1查看目录</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="built_in">abs</span> = os.path.abspath(__file__)<span class="comment">#里面的__file__代指的就是你当前的那个脚本</span></span><br><span class="line"><span class="comment">#获取当前运行的脚本的绝对路径路径</span></span><br><span class="line">path = os.path.dirname(<span class="built_in">abs</span>)<span class="comment">#获取的是当前文件的上一级目录的路径</span></span><br><span class="line">file = os.path.dirname(os.path.abspath(__file__))<span class="comment">#平时写代码的时候就可以这样把他们拼接起来来获取上一级目录的绝对路径，然后再拼接上文件的名字就可以了,也可能是在你的脚本目录下面的目录哦(๑╹◡╹)ﾉ”</span></span><br><span class="line">file_path = file + <span class="string">&#x27;文件名字&#x27;</span> </span><br></pre></td></tr></table></figure>

<h3 id="7-2文件夹"><a href="#7-2文件夹" class="headerlink" title="7.2文件夹"></a>7.2文件夹</h3><h4 id="7-2-1创建文件夹"><a href="#7-2-1创建文件夹" class="headerlink" title="7.2.1创建文件夹"></a>7.2.1创建文件夹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#os.makedirs(路径)</span></span><br><span class="line"><span class="comment">#案例</span></span><br><span class="line">path = os.path.join(base_path,<span class="string">&#x27;xx&#x27;</span>,<span class="string">&#x27;oo&#x27;</span>,<span class="string">&#x27;uuuu&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path):<span class="comment">#如果路径不存在</span></span><br><span class="line">    os.makedirs(path)<span class="comment">#创建一个文件夹</span></span><br></pre></td></tr></table></figure>

<h4 id="7-2-2是否为文件夹"><a href="#7-2-2是否为文件夹" class="headerlink" title="7.2.2是否为文件夹"></a>7.2.2是否为文件夹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.path.isdir(路径)<span class="comment">#判断是否为文件夹，返回一个布尔值</span></span><br></pre></td></tr></table></figure>

<h4 id="7-2-3删除文件或文件夹"><a href="#7-2-3删除文件或文件夹" class="headerlink" title="7.2.3删除文件或文件夹"></a>7.2.3删除文件或文件夹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.rmtrree(path)</span><br></pre></td></tr></table></figure>

<h4 id="7-2-4拷贝文件夹"><a href="#7-2-4拷贝文件夹" class="headerlink" title="7.2.4拷贝文件夹"></a>7.2.4拷贝文件夹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copytree(<span class="string">&quot;要拷贝的文件夹&quot;</span>,<span class="string">&quot;拷贝到这里&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="7-2-5拷贝文件"><a href="#7-2-5拷贝文件" class="headerlink" title="7.2.5拷贝文件"></a>7.2.5拷贝文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copy(<span class="string">&quot;要拷贝的文件&quot;</span>,<span class="string">&quot;拷贝到这里&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="7-2-6文件或文件夹重命名"><a href="#7-2-6文件或文件夹重命名" class="headerlink" title="7.2.6文件或文件夹重命名"></a>7.2.6文件或文件夹重命名</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.move(<span class="string">&quot;要移动的文件&quot;</span>,<span class="string">&quot;移动到这里&quot;</span>)<span class="comment">#目录要是一样的话就是重命名了(*´▽｀)ノノ</span></span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/12/30/%E4%BA%94%E3%80%81%E5%AD%A6%E4%B9%A0py%EF%BC%9A%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83-%E7%9F%A5%E8%AF%86%E8%A1%A5%E5%85%85%EF%BC%88pass-is-%E4%BD%8D%E8%BF%90%E7%AE%97%EF%BC%89/" rel="prev" title="五、学习py：代码规范 知识补充（pass is 位运算）">
      <i class="fa fa-chevron-left"></i> 五、学习py：代码规范 知识补充（pass is 位运算）
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/01/01/%E7%BE%A4%E5%8F%8B%E5%8F%91%E7%9A%84%E4%B8%80%E4%B8%AA%E9%A2%98%E7%9B%AE%E5%BF%83%E5%BE%97-%E6%95%8F%E6%84%9F%E6%96%87%E4%BB%B6-git%E6%B3%84%E9%9C%B2-flag%E7%9A%84%E9%9A%90%E8%97%8F/" rel="next" title="群友发的一个题目心得 敏感文件 git泄露 flag的隐藏">
      群友发的一个题目心得 敏感文件 git泄露 flag的隐藏 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E5%AD%A6%E4%B9%A0py%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="nav-number">1.</span> <span class="nav-text">六、学习py：文件操作的相关操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="nav-number">1.1.</span> <span class="nav-text">1.文件操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E8%AF%BB%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.1读文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-1%E8%AF%BB%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">1.1.1读文本文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-2%E8%AF%BB%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">1.1.2读图片文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-3%E6%89%A9%E5%B1%95%EF%BC%9A%E5%88%A4%E6%96%AD%E8%B7%AF%E5%BE%84%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="nav-number">1.1.1.3.</span> <span class="nav-text">1.1.3扩展：判断路径是否存在</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E5%86%99%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.2写文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-1%E5%86%99%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">1.2.1写文本文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-2%E5%86%99%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">1.2.2写图片文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-3%E6%A1%88%E4%BE%8B%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%96%87%E6%9C%AC%E5%82%A8%E5%AD%98%E8%B4%A6%E6%88%B7"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">1.2.3案例，实现用文本储存账户</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-4%E6%A1%88%E4%BE%8B%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%A4%9A%E7%94%A8%E6%88%B7%E7%9A%84%E6%B3%A8%E5%86%8C"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">1.2.4案例，实现多用户的注册</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-5%E6%A1%88%E4%BE%8B%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%9C%A8%E7%BD%91%E7%BB%9C%E4%B8%8A%E8%8E%B7%E5%8F%96%E5%86%85%E5%AE%B9%E5%B9%B6%E4%B8%94%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">1.2.5案例，实现在网络上获取内容并且写入文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E6%96%87%E4%BB%B6%E6%89%93%E5%BC%80%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.1.3.</span> <span class="nav-text">1.3文件打开模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-1%E4%B8%8B%E9%9D%A2%E5%B0%86%E4%BB%8B%E7%BB%8D%E5%90%84%E7%A7%8D%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">1.3.1下面将介绍各种模式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E5%B8%B8%E8%A7%81%E5%8A%9F%E8%83%BD"><span class="nav-number">1.1.4.</span> <span class="nav-text">1.4常见功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-1read%E8%AF%BB%E6%89%80%E6%9C%89"><span class="nav-number">1.1.4.1.</span> <span class="nav-text">1.4.1read读所有</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-2read-%E8%AF%BB%E6%8C%87%E5%AE%9A%E7%9A%84%E5%86%85%E5%AE%B9"><span class="nav-number">1.1.4.2.</span> <span class="nav-text">1.4.2read()读指定的内容</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-3readline-%E8%AF%BB%E4%B8%80%E8%A1%8C"><span class="nav-number">1.1.4.3.</span> <span class="nav-text">1.4.3readline()读一行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-4readlines-%E8%AF%BB%E5%8F%96%E6%89%80%E6%9C%89%E8%A1%8C%EF%BC%8C%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%88%97%E8%A1%A8%EF%BC%8C%E5%85%B6%E4%B8%AD%E6%AF%8F%E4%B8%80%E4%B8%AA%E5%85%83%E7%B4%A0%E6%98%AF%E6%AF%8F%E4%B8%80%E8%A1%8C%E7%9A%84%E5%86%85%E5%AE%B9%E3%80%82"><span class="nav-number">1.1.4.4.</span> <span class="nav-text">1.4.4readlines()读取所有行，返回一个列表，其中每一个元素是每一行的内容。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-5for%E5%BE%AA%E7%8E%AF"><span class="nav-number">1.1.4.5.</span> <span class="nav-text">1.4.5for循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-6write%EF%BC%8C%E5%86%99"><span class="nav-number">1.1.4.6.</span> <span class="nav-text">1.4.6write，写</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-7flush-%E5%88%B7%E5%88%B0%E7%A1%AC%E7%9B%98"><span class="nav-number">1.1.4.7.</span> <span class="nav-text">1.4.7flush,刷到硬盘</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-8%E7%A7%BB%E5%8A%A8%E5%85%89%E6%A0%87%E4%BD%8D%E7%BD%AE%EF%BC%88%E5%AD%97%E8%8A%82%EF%BC%89"><span class="nav-number">1.1.4.8.</span> <span class="nav-text">1.4.8移动光标位置（字节）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-9%E8%8E%B7%E5%8F%96%E5%85%89%E6%A0%87%E4%BD%8D%E7%BD%AE"><span class="nav-number">1.1.4.9.</span> <span class="nav-text">1.4.9获取光标位置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86"><span class="nav-number">1.1.5.</span> <span class="nav-text">1.5上下文管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6%E5%8A%9F%E8%83%BD%E6%89%A9%E5%B1%95%EF%BC%9A%E4%BB%8E%E6%8C%87%E5%AE%9A%E7%9A%84%E7%BD%91%E5%9D%80%E7%88%AC%E5%8F%96%E8%A7%86%E9%A2%91"><span class="nav-number">1.1.6.</span> <span class="nav-text">1.6功能扩展：从指定的网址爬取视频</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-csv%E6%A0%BC%E5%BC%8F%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.</span> <span class="nav-text">2.csv格式文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E6%89%A9%E5%85%85%E5%87%BD%E6%95%B0"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1扩充函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-ini%E6%A0%BC%E5%BC%8F"><span class="nav-number">1.3.</span> <span class="nav-text">3.ini格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E8%AF%BB%E5%8F%96%E6%89%80%E6%9C%89%E8%8A%82%E7%82%B9"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1读取所有节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E8%8E%B7%E5%8F%96%E8%8A%82%E7%82%B9%E4%B8%8B%E9%9D%A2%E7%9A%84%E9%94%AE%E5%80%BC"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2获取节点下面的键值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E8%8E%B7%E5%8F%96%E6%9F%90%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E4%B8%8B%E7%9A%84%E9%94%AE%E5%AF%B9%E5%BA%94%E7%9A%84%E5%80%BC"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3获取某一个节点下的键对应的值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4%E5%85%B6%E4%BB%96%E5%8A%9F%E8%83%BD"><span class="nav-number">1.3.4.</span> <span class="nav-text">3.4其他功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-1%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E8%BF%99%E4%B8%AA%E8%8A%82%E7%82%B9"><span class="nav-number">1.3.4.1.</span> <span class="nav-text">3.4.1判断文件是否有这个节点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-2%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9"><span class="nav-number">1.3.4.2.</span> <span class="nav-text">3.4.2添加一个节点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-3%E5%88%A0%E9%99%A4"><span class="nav-number">1.3.4.3.</span> <span class="nav-text">3.4.3删除</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-XML%E6%A0%BC%E5%BC%8F%E6%96%87%E4%BB%B6"><span class="nav-number">1.4.</span> <span class="nav-text">4.XML格式文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E4%BB%A5country-xml%E4%B8%BA%E4%BE%8B%EF%BC%8C%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B"><span class="nav-number">1.4.1.</span> <span class="nav-text">4.1以country.xml为例，内容如下</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E8%A7%A3%E6%9E%90"><span class="nav-number">1.4.2.</span> <span class="nav-text">4.2解析</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E8%B0%83%E7%94%A8from-string-%E8%BF%94%E5%9B%9E%E8%A7%A3%E6%9E%90%E6%A0%91%E7%9A%84%E6%A0%B9%E5%85%83%E7%B4%A0"><span class="nav-number">1.4.2.0.0.1.</span> <span class="nav-text">2)调用from_string(),返回解析树的根元素</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3%E9%81%8D%E5%8E%86"><span class="nav-number">1.4.3.</span> <span class="nav-text">4.3遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4%E4%BF%AE%E6%94%B9xml%E7%BB%93%E6%9E%84"><span class="nav-number">1.4.4.</span> <span class="nav-text">4.4修改xml结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5%E5%88%9B%E5%BB%BAxml%E6%96%87%E6%A1%A3"><span class="nav-number">1.4.5.</span> <span class="nav-text">4.5创建xml文档</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Excel%E6%A0%BC%E5%BC%8F%E6%96%87%E4%BB%B6"><span class="nav-number">1.5.</span> <span class="nav-text">5.Excel格式文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1%E8%AF%BBExcel"><span class="nav-number">1.5.1.</span> <span class="nav-text">5.1读Excel</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-1%E8%AF%BBsheet"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">5.1.1读sheet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-2%E8%AF%BB%E5%8F%96%E5%8D%95%E5%85%83%E6%A0%BC"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">5.1.2读取单元格</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2%E5%86%99Excel"><span class="nav-number">1.5.2.</span> <span class="nav-text">5.2写Excel</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-1%E5%9C%A8%E5%8E%9FExcel%E6%96%87%E4%BB%B6%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%86%99%E5%86%85%E5%AE%B9%E3%80%82"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">5.2.1在原Excel文件基础上写内容。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-2%E6%96%B0%E5%88%9B%E5%BB%BAExcel%E6%96%87%E4%BB%B6%E5%86%99%E5%86%85%E5%AE%B9"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">5.2.2新创建Excel文件写内容</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6"><span class="nav-number">1.6.</span> <span class="nav-text">6.压缩文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E8%B7%AF%E5%BE%84%E7%9B%B8%E5%85%B3"><span class="nav-number">1.7.</span> <span class="nav-text">7.路径相关</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1%E6%9F%A5%E7%9C%8B%E7%9B%AE%E5%BD%95"><span class="nav-number">1.7.1.</span> <span class="nav-text">7.1查看目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">1.7.2.</span> <span class="nav-text">7.2文件夹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-1%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">7.2.1创建文件夹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-2%E6%98%AF%E5%90%A6%E4%B8%BA%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">1.7.2.2.</span> <span class="nav-text">7.2.2是否为文件夹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-3%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E6%88%96%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">1.7.2.3.</span> <span class="nav-text">7.2.3删除文件或文件夹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-4%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">1.7.2.4.</span> <span class="nav-text">7.2.4拷贝文件夹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-5%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6"><span class="nav-number">1.7.2.5.</span> <span class="nav-text">7.2.5拷贝文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-6%E6%96%87%E4%BB%B6%E6%88%96%E6%96%87%E4%BB%B6%E5%A4%B9%E9%87%8D%E5%91%BD%E5%90%8D"><span class="nav-number">1.7.2.6.</span> <span class="nav-text">7.2.6文件或文件夹重命名</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="十三"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">十三</p>
  <div class="site-description" itemprop="description">潜心学习，不骄不躁</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">176</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">十三</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"live2d-widget-model-tsumiki"},"display":{"position":"right","width":300,"height":600},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>
